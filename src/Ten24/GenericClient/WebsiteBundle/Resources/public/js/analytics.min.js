var _ga=_ga||{},_gaq=_gaq||[];jQuery(function(){window.googleAnalyticsApi=function(a,b){var c=function(a){return a?a+".":""},d=function(a,b){if(a){var c=new RegExp("[\\?&#]"+b+"=([^&#]*)"),d=c.exec(a);return null!=d?unescape(d[1]):void 0}},e=function(){var c=a(this);if(c.is("input[type=button]"))return void b.push(["_trackEvent","Button","Click"]);var d=c.attr("href");if(null!=d&&"#"!==d){var e,f;c.hasClass("btn")&&(e="Button",f="Click",b.push(["_trackEvent",e,f,d])),d.match(/^http/i)&&!d.match(document.domain)&&(e="Outgoing",f="Link",b.push(["_trackEvent",e,f,d]));var g=d.match(/\.(doc|pdf|xls|ppt|zip|txt|vsd|vxd|js|css|rar|exe|wma|mov|avi|wmv|mp3)$/i);g&&(e="Download",f=g[0],b.push(["_trackEvent",e,f,d])),d.match(/^mailto:/i)&&(e="Outgoing",f="Email",b.push(["_trackEvent",e,f,d]))}},f=function(a,e){var f=c(e);try{twttr&&twttr.events&&twttr.events.bind&&twttr.events.bind("tweet",function(c){if(c){var e;c.target&&"IFRAME"==c.target.nodeName&&(e=d(c.target.src,"url")),b.push([f+"_trackSocial","twitter","tweet",e,a])}})}catch(g){}},g=function(a,d){var e=c(d);try{FB&&FB.Event&&FB.Event.subscribe&&(FB.Event.subscribe("edge.create",function(c){b.push([e+"_trackSocial","facebook","like",c,a])}),FB.Event.subscribe("edge.remove",function(c){b.push([e+"_trackSocial","facebook","unlike",c,a])}),FB.Event.subscribe("message.send",function(c){b.push([e+"_trackSocial","facebook","send",c,a])}))}catch(f){}},h=function(a,b){g(a,b),f(a,b)},i=function(a){if(a){var b=function(){console&&console.log("Google Analytics debug:",arguments[0])};_gaq.push=b;for(var c in _gaq)_gaq.hasOwnProperty(c)&&"function"!=typeof _gaq[c]&&b(_gaq[c])}else!function(a,b){var c=a.createElement(b);c.type="text/javascript",c.async=!0,c.src=("https:"==a.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js";var d=a.getElementsByTagName(b)[0];d.parentNode.insertBefore(c,d)}(document,"script")};return a("a, input[type=button]").on("click",e),{clickHandler:e,trackFacebook:g,trackTwitter:f,trackSocial:h,init:i}}(jQuery,_gaq)});